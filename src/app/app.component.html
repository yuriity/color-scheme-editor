<div id="app-container" class="mat-app-background" [ngClass]="[(theme$ | async)]">
  <mat-sidenav-container>

    <mat-sidenav #sidenav mode="over">
      <mat-nav-list>
        <div class="branding">
          <mat-icon svgIcon="app-logo-filled"></mat-icon>
          <span>Color Scheme Editor</span>
        </div>
        <a mat-list-item [routerLink]="'/token-colors'" routerLinkActive="active" (click)="sidenav.close()"> Editor </a>
        <a mat-list-item [routerLink]="'/help'" routerLinkActive="active" (click)="sidenav.close()"> Help </a>
        <a mat-list-item [routerLink]="'/about'" routerLinkActive="active" (click)="sidenav.close()"> About </a>
        <a mat-list-item href="https://github.com/yuriity/color-scheme-editor#colorschemeeditor" target="_blank"
          rel="noreferrer">
          Github
        </a>
      </mat-nav-list>
    </mat-sidenav>

    <header>
      <mat-toolbar color="primary" class="mat-elevation-z6">
        <button mat-icon-button class="bars-button" (click)="sidenav.open()">
          <mat-icon svgIcon="bars"></mat-icon>
        </button>
        <a mat-icon-button matTooltip="Home" href="/" class="app-logo">
          <mat-icon svgIcon="app-logo"></mat-icon>
        </a>
        <button mat-button class="nav-button" [routerLink]="'/token-colors'" routerLinkActive="active">
          Editor
        </button>
        <button mat-button class="nav-button" [routerLink]="'/help'" routerLinkActive="active">
          Help
        </button>
        <button mat-button class="nav-button" [routerLink]="'/about'" routerLinkActive="active">
          About
        </button>

        <span class="toolbar-spacer"></span>

        <button mat-button [matMenuTriggerFor]="fileMenu">
          File<mat-icon svgIcon="caret-down" class="menu-arrow-down"></mat-icon>
        </button>
        <mat-menu #fileMenu="matMenu" yPosition="below" [overlapTrigger]="false">
          <input #fileInput type="file" accept=".json" (change)="loadFile($event.target.files[0])"
            (click)="this.fileInput.value = null" tabindex="-1" style="display:none">
          <button mat-menu-item (click)="fileInput.click()">
            <mat-icon svgIcon="folder-open"></mat-icon>
            <span>Open local file...</span>
          </button>
          <button mat-menu-item (click)="generateColorScheme()">
            <mat-icon svgIcon="file-upload"></mat-icon>
            <span>Import from copied JSON...</span>
          </button>
        </mat-menu>
        <button mat-icon-button matTooltip="Undo all changes" [disabled]="(modifiedTokensTotal$ | async) <= 0"
          (click)="undoAllChanges()">
          <mat-icon svgIcon="undo" [matBadge]="modifiedTokensTotal$ | async"
            [matBadgeHidden]="(modifiedTokensTotal$ | async) <= 0" matBadgeSize="small" matBadgeColor="accent"
            matBadgePosition="below after" matBadgeDescription="Number of modified tokens">
          </mat-icon>
        </button>
        <button mat-icon-button matTooltip="Export results" [disabled]="(modifiedTokensTotal$ | async) <= 0"
          (click)="exportChanges()">
          <mat-icon svgIcon="file-export"></mat-icon>
        </button>

        <button mat-icon-button [matMenuTriggerFor]="themesMenu" matTooltip="Select application theme">
          <mat-icon svgIcon="palette"></mat-icon>
        </button>
        <mat-menu #themesMenu="matMenu">
          <button mat-menu-item (click)="onThemeChange('light-theme')" [disabled]="(theme$ | async) === 'light-theme'">
            Ligth Theme
          </button>
          <button mat-menu-item (click)="onThemeChange('dark-theme')" [disabled]="(theme$ | async) === 'dark-theme'">
            Dark Theme
          </button>
        </mat-menu>
        <a mat-icon-button class="nav-button" matTooltip="Project Github Repository"
          href="https://github.com/yuriity/color-scheme-editor#colorschemeeditor" target="_blank" rel="noreferrer">
          <mat-icon svgIcon="github"></mat-icon>
        </a>
      </mat-toolbar>

      <mat-progress-bar color="accent" mode="indeterminate" *ngIf="tokensLoading$ | async">
      </mat-progress-bar>
    </header>

    <main>
      <router-outlet></router-outlet>
    </main>

  </mat-sidenav-container>
</div>
